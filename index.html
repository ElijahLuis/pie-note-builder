<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIE Note Builder - School Nursing Documentation</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <a href="#notePreview" class="skip-link">Skip to Note Preview â¬‡</a>

    <div class="container">
        <header role="banner">
            <div class="header-content">
                <div class="header-left">
                    <h1><a href="#" id="homeLink" class="home-link">PIE Note Builder</a></h1>
                    <p class="subtitle">Problem â†’ Intervention â†’ Evaluation</p>
                </div>
                <div class="header-buttons">
                    <button id="darkModeBtn" class="utility-btn" aria-label="Toggle dark mode" aria-pressed="false">
                        <span class="utility-icon">ğŸŒ™</span>
                        <span class="utility-text">Dark Mode</span>
                    </button>
                    <button id="privacyFilterBtn" class="utility-btn privacy-btn" aria-label="Toggle privacy filter" aria-pressed="false">
                        <span class="utility-icon">ğŸ‘ï¸</span>
                        <span class="utility-text">Privacy Filter</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Auto-save Indicator -->
        <div id="autoSaveIndicator" class="auto-save-indicator" role="status" aria-live="polite" aria-atomic="true">
            <span class="auto-save-icon">ğŸ’¾</span>
            <span class="auto-save-text">Auto-saved</span>
        </div>

        <!-- Clinical Decision Support Alerts -->
        <div id="cdsAlerts" class="cds-alerts" role="alert" aria-live="assertive"></div>

        <!-- Problem Section -->
        <section class="card" role="region" aria-labelledby="problem-heading">
            <h2 id="problem-heading">ğŸ©º Problem</h2>
            <div class="problem-buttons" role="group" aria-label="Problem type selection">
                <button class="problem-btn" data-problem="diabetes" aria-label="Select Diabetes Management">
                    <span>ğŸ’‰ Diabetes Management</span>
                </button>
                <button class="problem-btn" data-problem="medication" aria-label="Select Medication Administration">
                    <span>ğŸ’Š Medication Administration</span>
                </button>
                <button class="problem-btn" data-problem="first-aid" aria-label="Select First Aid / Minor Injury">
                    <span>ğŸ©¹ First Aid / Minor Injury</span>
                </button>
                <button class="problem-btn" data-problem="other" aria-label="Select Other Problem Type">
                    <span>â• Other</span>
                </button>
            </div>
        </section>

        <!-- Intervention Section (dynamically populated) -->
        <section class="card intervention-section sensitive" id="interventionSection" style="display: none;" role="region" aria-labelledby="intervention-heading">
            <h2 id="intervention-heading">ğŸ’‰ Intervention</h2>
            <div id="interventionContent" aria-label="Intervention details form"></div>
        </section>

        <!-- Evaluation Section -->
        <section class="card evaluation-section sensitive-medium" id="evaluationSection" style="display: none;" role="region" aria-labelledby="evaluation-heading">
            <h2 id="evaluation-heading">âœ… Evaluation</h2>
            <div id="evaluationContent" aria-label="Evaluation details form"></div>
        </section>

        <!-- Note Format Options -->
        <section class="card format-section" id="formatSection" style="display: none;" role="region" aria-labelledby="format-heading">
            <h2 id="format-heading">âš™ï¸ Note Format Options</h2>
            <div class="checkbox-item">
                <input type="checkbox" id="piePrefix" checked aria-describedby="prefix-description">
                <label for="piePrefix">Include PIE prefixes (P:, I:, E:) in note</label>
            </div>
            <p id="prefix-description" class="info-text" style="margin-top: 10px;">With prefixes: "P: Student presented with..." | Without: "Student presented with..."</p>
        </section>

        <!-- Generated Note Preview -->
        <section class="card note-preview" id="notePreview" style="display: none;" role="region" aria-labelledby="preview-heading" aria-live="polite">
            <h2 id="preview-heading">ğŸ“‹ Generated PIE Note</h2>
            <div class="note-content" id="noteContent" role="document" aria-label="Generated clinical note"></div>
            <div class="note-actions">
                <button id="copyBtn" class="primary-btn" aria-label="Copy note to clipboard">ğŸ“‹ Copy to Clipboard</button>
                <button id="resetBtn" class="secondary-btn" aria-label="Reset form and start new note">ğŸ”„ Start New Note</button>
            </div>
            <div id="copyFeedback" class="copy-feedback" role="status" aria-live="polite"></div>
        </section>

        <!-- Usage Statistics (for clinical decision support) -->
        <section class="card stats-section" id="statsSection" role="region" aria-labelledby="stats-heading">
            <h2 id="stats-heading">ğŸ“Š Your Documentation Patterns</h2>
            <div id="statsContent" aria-label="Usage statistics">
                <p class="info-text">Pattern tracking will appear after you create a few notes.</p>
            </div>
        </section>
    </div>

    <!-- Screen Reader Announcements -->
    <div id="sr-announcements" class="sr-only" role="status" aria-live="polite" aria-atomic="true"></div>

    <script src="script.js"></script>
</body>
</html>
